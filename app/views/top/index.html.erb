<!-- 新ワード追加ボタン -->
<%
if @current_user   # ログイン中の場合
	link = '/add' # サーバーで処理
else # ログアウト中の場合
	link = './' 
	action = 'getWord()' # csvデータ取得して、ローカルストレージに追加
end 
%>

<div class='text-center mb-4'>
	<a href='<%= link %>' class='btn btn-primary text-center' onclick='<%= action %>'>新しいワードを追加 ＋</a>
	<!-- <form action='' method='get'> -->
	<!-- <input type='submit' name='make' value='ワードを追加 ＋' class='btn'> -->
</div>



<!-- テーブルを表示 -->
<table class='table table-sm'>
  <tbody id='tb'>
		<% for word in @words %> <!-- DBから取り出す  -->
			<% user = User.find_by(id: word.user_id) %> <!-- それぞれの単語ごとにユーザーを特定 -->
			<% user = word.user %> 
			<tr class='row'>
				<!-- New -->
				<% if word.visit==0 then deco='NEW' else deco='' end %> <!-- 訪問チェック -->
				<td class='col-2 col-lg-1'>
          <div class='text-danger new'><%= deco %></div>
				</td>

				<!-- 検索ワード -->
				<td class='col-8 col-lg-9 word'>
          <a href='<%= "/#{word.id}/visit" %>' onclick='window.open("https://www.google.com/search?q=<%= "#{word.content}" %>")' class='d-block'> <!-- visitアクション起こすと同時に、jsでGoogleブラウザ開く -->
	        	<%= word.content %> <%= user.id %>
        	</a>
				</td>

			  <!-- スター -->  
				<% if word.star==0 then color='nostar' else color='star' end %> <!-- 色の為のクラス -->
				<td class='col-1 col-lg-1'>
          <a href='<%= "/#{word.id}/update" %>' class='<%= color %>'><i class='material-icons'>star</i></a>
				</td>

			  <!-- ごみ箱 -->  
				<td class='col-1 col-lg-1'>
          <a href='<%= "/#{word.id}/delete" %>'><i class='material-icons trash'>delete</i></a>
				</td>

			</tr>
		<% end %> <!-- for文終わり -->
  </tbody>
</table>

<!-- ログアウト中はjavascriptで、id='tb'からテーブル生成 -->
<% if @current_user == nil %>
	<%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
<% end %>
